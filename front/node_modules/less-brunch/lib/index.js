(function() {
  var LESSCompiler, less, sysPath;

  less = require('less');

  sysPath = require('path');

  module.exports = LESSCompiler = (function() {

    LESSCompiler.prototype.brunchPlugin = true;

    LESSCompiler.prototype.type = 'stylesheet';

    LESSCompiler.prototype.extension = 'less';

    function LESSCompiler(config) {
      this.config = config;
      null;
    }

    LESSCompiler.prototype.compile = function(data, path, callback) {
      var parser,
        _this = this;
      parser = new less.Parser({
        paths: [this.config.rootPath, sysPath.dirname(path)],
        filename: path
      });
      return parser.parse(data, function(error, tree) {
        if (error != null) return callback(error.message);
        return callback(null, tree.toCSS());
      });
    };

    return LESSCompiler;

  })();

}).call(this);
